<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ARTOKEN — проверка редкости ID аккаунтов Polywar</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #2c2c2c;
      --header: #191919;
      --card: #3a3a3a;
      --accent: #7c3aed;
      --muted: #b0b0b0;
      --bad: #ef4444;
      --good: #16a34a;
    }

    *, *::before, *::after {
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      margin: 0;
    }

    body {
      font-family: Inter, system-ui, sans-serif;
      background: var(--bg);
      color: #f1f1f1;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    header {
      background: var(--header);
      padding: 4px 12px;
      display: flex;
      align-items: center;
      justify-content: flex-start;
    }

    .logo {
      font-family: 'Montserrat', sans-serif;
      font-weight: 600;
      font-size: 28px;
      color: #fff;
      text-transform: uppercase;
    }

    main {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      padding-top: 24px;
    }

    .site-description {
      font-size: 16px;
      color: var(--muted);
      width: 100%;
      max-width: 400px;
      text-align: justify;
      line-height: 1.6;
      margin: 0 0 16px 0;
      padding: 0 8px;
    }

    .site-description p {
      margin: 4px 0;
    }

    .checker-wrapper {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      width: 100%;
    }

    .card {
      background: var(--card);
      border-radius: 12px;
      padding: 20px;
      width: 100%;
      max-width: 420px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h2 {
      margin: 0 0 12px 0;
      font-size: 20px;
      text-align: center;
    }

    .row {
      display: flex;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
      width: 100%;
      justify-content: center;
    }

    input[type="text"] {
      flex: 1;
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid #444;
      background: #222;
      color: inherit;
      font-size: 16px;
      min-width: 0;
    }

    button {
      background: var(--accent);
      border: none;
      color: #fff;
      padding: 10px 14px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      flex-shrink: 0;
      transition: background 0.3s;
    }

    button:hover {
      background: #6d28d9;
    }

    .info {
      margin-top: 16px;
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      width: 100%;
    }

    .tile {
      padding: 12px;
      background: #2a2a2a;
      border-radius: 10px;
    }

    .small {
      font-size: 12px;
      color: var(--muted);
    }

    .big {
      font-weight: 700;
      font-size: 18px;
      margin-top: 6px;
    }

    .bar {
      height: 12px;
      background: #444;
      border-radius: 8px;
      overflow: hidden;
      margin-top: 8px;
    }

    .bar > i {
      display: block;
      height: 100%;
      background: linear-gradient(90deg, #5eead4, #60a5fa);
      width: 0%;
    }

    .category {
      font-weight: 700;
      padding: 6px 10px;
      border-radius: 999px;
      display: inline-block;
      margin-top: 6px;
      font-size: 13px;
    }

    .patterns {
      margin-top: 12px;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .pattern {
      background: #2a2a2a;
      padding: 6px 8px;
      border-radius: 8px;
      font-size: 13px;
      color: var(--muted);
    }

    .error {
      color: var(--bad);
      font-weight: 600;
      margin-top: 8px;
    }

    footer {
      background: var(--header);
      padding: 8px 24px;
      text-align: center;
    }

    footer p {
      font-size: 13px;
      color: var(--muted);
      margin: 0;
    }

    @media (max-width: 600px) {
      .row {
        flex-direction: column;
        gap: 8px;
        width: 100%;
      }

      input[type="text"],
      button {
        width: 100%;
      }

      h2 {
        font-size: 18px;
      }

      .site-description {
        max-width: 100%;
        font-size: 15px;
        padding: 0 16px;
      }

      .logo {
        font-size: 20px;
      }

      .big {
        font-size: 16px;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">ARTOKEN</div>
  </header>

  <main>
    <div class="site-description">
      <p>Добро пожаловать на <strong>ArToken</strong> — сайт для проверки редкости ID аккаунтов Polywar.</p>
      <p>Введите свой игровой ID, и вы сразу получите индекс редкости на основе особенностей символов, визуализацию шаблонов и категорию редкости.</p>
    </div>

    <div class="checker-wrapper">
      <div class="card" role="main">
        <h2>Введите ID</h2>
        <div class="row">
          <input id="idInput" type="text" maxlength="6" aria-label="ID"/>
          <button id="checkBtn">Проверить</button>
        </div>
        <div id="error" class="error" style="display:none;"></div>

        <div id="results" style="display:none;">
          <div class="info" aria-live="polite">
            <div class="tile">
              <div class="small">Ввод</div>
              <div class="big" id="showInput"></div>
              <div class="small" id="showLengths"></div>
            </div>
            <div class="tile">
              <div class="small">Индекс редкости</div>
              <div class="big" id="rarityPercent">—</div>
              <div class="bar"><i id="rarityBar"></i></div>
              <div id="rarityCategory" class="category"></div>
            </div>
          </div>
          <div style="margin-top:12px;">
            <div class="small">Обнаруженные шаблоны</div>
            <div class="patterns" id="patterns"></div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer>
    <p>© 2025 — ARTOKEN. Почта поддержки: argentum.polywar.contact@gmail.com</p>
  </footer>

  <script>
    const MIN_LEN = 1;
    const MAX_LEN = 6;
    const input = document.getElementById('idInput');
    const btn = document.getElementById('checkBtn');
    const errorEl = document.getElementById('error');
    const results = document.getElementById('results');
    const showInput = document.getElementById('showInput');
    const showLengths = document.getElementById('showLengths');
    const rarityPercentEl = document.getElementById('rarityPercent');
    const rarityBar = document.getElementById('rarityBar');
    const rarityCategoryEl = document.getElementById('rarityCategory');
    const patternsEl = document.getElementById('patterns');

    function validateId(s) {
      if (!s) return { ok: false, msg: 'Пустая строка' };
      if (s.length < MIN_LEN || s.length > MAX_LEN) return { ok: false, msg: 'Длина 1–6 символов' };
      if (!/^[a-z0-9]+$/.test(s)) return { ok: false, msg: 'Допустимы только a–z и 0–9' };
      return { ok: true };
    }

    function detectPatterns(s) {
      const notes = [];
      if (/^([a-z0-9])\1*$/.test(s)) notes.push('Все символы одинаковые');
      if (s.length > 1 && s === s.split('').reverse().join('')) notes.push('Палиндром');
      if (/^[0-9]+$/.test(s)) notes.push('Только цифры');
      if (/^[a-z]+$/.test(s)) notes.push('Только буквы');
      return notes;
    }

    function computeRarity(s) {
      const L = s.length;
      let maxRepeat = 1, current = 1;
      for (let i = 1; i < L; i++) {
        if (s[i] === s[i - 1]) current++;
        else current = 1;
        if (current > maxRepeat) maxRepeat = current;
      }
      const rarityPercent = (maxRepeat / L) * 100;
      let cat = 'Common';
      if (rarityPercent < 20) cat = 'Common';
      else if (rarityPercent < 40) cat = 'Uncommon';
      else if (rarityPercent < 60) cat = 'Rare';
      else if (rarityPercent < 80) cat = 'Very Rare';
      else cat = 'Legendary';
      return { rarityPercent: +rarityPercent.toFixed(2), cat };
    }

    function updateUI(s) {
      errorEl.style.display = 'none';
      s = s.toLowerCase();
      const v = validateId(s);
      if (!v.ok) {
        errorEl.textContent = v.msg;
        errorEl.style.display = 'block';
        results.style.display = 'none';
        return;
      }

      showInput.textContent = s.toUpperCase();
      showLengths.textContent = `Длина: ${s.length}`;

      const patterns = detectPatterns(s);
      patternsEl.innerHTML = patterns.length > 0
        ? patterns.map(p => `<div class="pattern">${p}</div>`).join('')
        : '<div class="pattern">Нет шаблонов</div>';

      const rarity = computeRarity(s);
      rarityPercentEl.textContent = rarity.rarityPercent + '%';
      rarityBar.style.width = Math.max(2, rarity.rarityPercent) + '%';

      const colors = {
        'Common': '#94a3b8',
        'Uncommon': '#60a5fa',
        'Rare': '#7c3aed',
        'Very Rare': '#f97316',
        'Legendary': '#f43f5e'
      };

      rarityCategoryEl.textContent = rarity.cat;
      rarityCategoryEl.style.background = colors[rarity.cat];

      results.style.display = 'block';
    }

    btn.onclick = () => { updateUI(input.value.trim()); };
    input.onkeydown = (e) => { if (e.key === 'Enter') btn.click(); };
  </script>
</body>
</html>
